<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Practice App</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'JetBrains Mono', monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background-color: #121212;
            color: #f0f0f0;
            padding: 20px;
        }
        
        #app-container {
            width: 90%;
            max-width: 900px;
            background-color: #1e1e1e;
            border-radius: 12px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.6);
            padding: 30px;
            position: relative;
        }
        
        h1 {
            text-align: center;
            color: #f0f0f0;
            margin-top: 40px;
            margin-bottom: 40px;
            font-size: 28px;
            letter-spacing: 3px;
            text-transform: lowercase;
            font-weight: 500;
        }
        
        #typing-area {
            margin: 20px 0 30px 0;
            padding: 28px;
            border: none;
            border-radius: 8px;
            min-height: 160px;
            font-size: 22px;
            line-height: 1.6;
            position: relative;
            background-color: #252525;
            box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.3), 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        #text-display {
            letter-spacing: 0.8px;
            word-spacing: 5px;
        }
        
        .text-char {
            color: #666; /* Default gray color */
            transition: color 0.1s, background-color 0.1s;
        }
        
        .text-char.correct {
            color: #ffffff; /* White when correct */
        }
        
        .text-char.incorrect {
            color: #ff6666; /* Brighter red when incorrect */
            background-color: rgba(255, 0, 0, 0.3);
            border-radius: 3px;
            padding: 0 2px;
        }
        
        .text-char.current {
            border-bottom: 2px solid #4488ff;
        }
        
        #stats {
            display: flex;
            gap: 15px;
            position: absolute;
            top: 25px;
            left: 25px;
        }
        
        .stat-box {
            background-color: #252525;
            border-radius: 6px;
            padding: 8px 15px;
            text-align: center;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.3);
            border-left: 4px solid #4488ff;
        }
        
        .stat-box h3 {
            margin: 0 0 5px 0;
            font-size: 14px;
            opacity: 0.7;
            font-weight: 400;
        }
        
        #wpm, #accuracy, #time {
            font-size: 18px;
            font-weight: 700;
        }
        
        #controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 10px;
        }
        
        button {
            padding: 12px 24px;
            background-color: #4488ff;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.2s;
            text-transform: lowercase;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
            font-family: 'JetBrains Mono', monospace;
            font-weight: 500;
        }
        
        button:hover {
            background-color: #5599ff;
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.3);
        }
        
        button:active {
            transform: translateY(0);
            box-shadow: 0 2px 3px rgba(0, 0, 0, 0.2);
        }
        
        select {
            padding: 12px 20px;
            font-size: 16px;
            border-radius: 6px;
            border: none;
            background-color: #252525;
            color: #f0f0f0;
            cursor: pointer;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
            text-transform: lowercase;
            font-family: 'JetBrains Mono', monospace;
        }
        
        select:focus {
            outline: none;
            box-shadow: 0 0 0 2px rgba(68, 136, 255, 0.5);
        }
        
        /* Add a subtle hint at the bottom */
        #hint {
            text-align: center;
            margin-top: 20px;
            font-size: 14px;
            opacity: 0.6;
        }

        /* Length control */
        #length-control {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
        }
        
        #text-length {
            width: 100px;
        }
        
        label {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <div id="app-container">
        <div id="stats">
            <div class="stat-box">
                <h3>wpm</h3>
                <div id="wpm">0</div>
            </div>
            <div class="stat-box">
                <h3>accuracy</h3>
                <div id="accuracy">100%</div>
            </div>
            <div class="stat-box">
                <h3>time</h3>
                <div id="time">0:00</div>
            </div>
        </div>
        
        <h1>typing practice</h1>
        
        <div id="typing-area">
            <div id="text-display"></div>
        </div>
        
        <div id="controls">
            <select id="text-select">
                <option value="easy">easy words</option>
                <option value="medium" selected>medium words</option>
                <option value="hard">hard words</option>
                <option value="code">code style</option>
            </select>
            <button id="reset-btn">new text</button>
        </div>

        <div id="length-control">
            <label>
                text length:
                <input type="range" id="text-length" min="20" max="150" value="50">
                <span id="length-value">50</span> words
            </label>
        </div>
        
        <div id="hint">start typing to begin</div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Word collections for different difficulty levels
            const wordCollections = {
                easy: [
                    "the", "and", "for", "are", "but", "not", "you", "all", "any", "can", "had", "her", "was", "one", 
                    "our", "out", "day", "get", "has", "him", "his", "how", "man", "new", "now", "old", "see", "two", 
                    "way", "who", "boy", "did", "its", "let", "put", "say", "she", "too", "use", "cat", "dog", "run", 
                    "sit", "try", "car", "sun", "top", "bed", "fun", "pen", "red", "yes", "big", "lot", "end", "got",
                    "few", "hot", "cut", "ask", "fly", "ran", "map", "low", "far", "bad", "egg", "eat", "tea", "sea",
                    "cup", "hat", "bit", "box", "fox", "job", "key", "leg", "lip", "mix", "pay", "sad", "tie", "win"
                ],
                medium: [
                    "about", "above", "after", "again", "along", "began", "below", "between", "brought", "called", 
                    "cannot", "certain", "change", "children", "country", "create", "describe", "develop", "different", 
                    "during", "enough", "example", "family", "father", "follow", "found", "friends", "general", "government", 
                    "great", "helped", "house", "however", "important", "include", "increase", "interest", "learned", 
                    "little", "looking", "machine", "material", "measure", "member", "mother", "mountain", "music", 
                    "nation", "never", "notice", "number", "often", "order", "other", "paper", "people", "perhaps", 
                    "picture", "places", "plants", "point", "power", "problem", "question", "rather", "really", 
                    "river", "school", "several", "should", "simple", "something", "special", "story", "study", 
                    "suddenly", "through", "together", "toward", "understand", "usually", "various", "watch", "water", 
                    "without", "woman", "world", "would", "young"
                ],
                hard: [
                    "absolutely", "acceptable", "accommodate", "achievement", "acquaintance", "administration", 
                    "advertisement", "aggravation", "alternative", "ambassador", "anticipation", "appropriate", 
                    "architecture", "assassination", "automatically", "availability", "beautifully", "categorically", 
                    "circumstance", "collaboration", "communication", "compassionate", "comprehensive", "configuration", 
                    "consciousness", "consideration", "constitution", "contemporary", "contribution", "conventional", 
                    "conversation", "correlation", "deliberately", "demonstration", "determination", "disappearance", 
                    "disappointing", "discrimination", "distinguished", "distribution", "dramatically", "economically", 
                    "effectiveness", "embarrassment", "entertainment", "enthusiastic", "environmental", "establishment", 
                    "extraordinarily", "fascination", "fundamentally", "grandchildren", "gravitational", "headquarters", 
                    "identification", "implementation", "impossibility", "improvement", "independence", "indispensable", 
                    "individually", "industrialized", "inevitability", "inflammation", "infrastructure", "ingredients", 
                    "intelligence", "interpretation", "investigation", "jurisdiction", "justification", "knowledgeable", 
                    "manufacturing", "mathematician", "meaningfulness", "miscellaneous", "mischievousness", "misunderstood", 
                    "modification", "multiplication", "negotiation", "nevertheless", "occasionally", "organization", 
                    "overwhelming", "particularly", "perpendicular", "perseverance", "pharmaceutical", "philosophical", 
                    "pronunciation", "proportionally", "psychological", "qualification", "quantitatively", "questionnaire", 
                    "recommendation", "rehabilitation", "relationship", "representative", "responsibility", "revolutionary", 
                    "significantly", "simultaneously", "sophistication", "specifically", "straightforward", "substantially", 
                    "substitution", "technological", "transformation", "transportation", "uncomfortable", "understanding", 
                    "unfortunately", "visualization"
                ],
                code: [
                    "function", "variable", "const", "return", "class", "import", "export", "async", "await", 
                    "promise", "interface", "extends", "implements", "static", "private", "public", "protected", 
                    "default", "boolean", "string", "number", "array", "object", "method", "property", "parameter", 
                    "argument", "null", "undefined", "typeof", "instanceof", "constructor", "prototype", "callback", 
                    "arrow", "module", "component", "state", "props", "render", "event", "listener", "handler", 
                    "dispatch", "reducer", "action", "store", "context", "hook", "effect", "memo", "ref", "fragment", 
                    "element", "attribute", "selector", "query", "document", "window", "fetch", "request", "response", 
                    "json", "parse", "stringify", "filter", "map", "reduce", "foreach", "push", "pop", "shift", 
                    "unshift", "concat", "slice", "splice", "length", "index", "key", "value", "entries", "sort", 
                    "search", "match", "replace", "split", "join", "trim", "lowercase", "uppercase", "timeout", 
                    "interval", "promise", "resolve", "reject", "catch", "finally", "iterate", "recursive", "algorithm",
                    "debug", "console", "log", "error", "warning", "stack", "trace", "break", "continue", "throw",
                    "try", "catch", "finally"
                ]
            };
            
            // Elements
            const textDisplay = document.getElementById('text-display');
            const textSelect = document.getElementById('text-select');
            const resetBtn = document.getElementById('reset-btn');
            const textLengthSlider = document.getElementById('text-length');
            const textLengthValue = document.getElementById('length-value');
            const wpmDisplay = document.getElementById('wpm');
            const accuracyDisplay = document.getElementById('accuracy');
            const timeDisplay = document.getElementById('time');
            const hintDisplay = document.getElementById('hint');
            
            // Variables
            let currentText = '';
            let currentIndex = 0;
            let startTime = null;
            let timerInterval = null;
            let totalKeystrokes = 0;
            let incorrectKeystrokes = 0;
            
            // Update text length display
            textLengthSlider.addEventListener('input', function() {
                textLengthValue.textContent = this.value;
            });

            // Generate random text based on difficulty and length
            function generateText(difficulty, length) {
                const words = wordCollections[difficulty];
                let result = [];
                
                // Ensure we don't exceed the array length
                const maxLoops = Math.min(length, 1000);
                
                for (let i = 0; i < maxLoops; i++) {
                    // Get a random word from the collection
                    const randomIndex = Math.floor(Math.random() * words.length);
                    result.push(words[randomIndex]);
                }
                
                // For code difficulty, add some special characters and formatting
                if (difficulty === 'code') {
                    // Insert some operators and syntax at random positions
                    const operators = ['+', '=', '==', '===', '!=', '!==', '>', '<', '>=', '<=', '&&', '||', '=>'];
                    const syntax = ['()', '{}', '[]', ';', ',', '.'];
                    
                    // Replace some spaces with operators or syntax
                    for (let i = 1; i < result.length; i++) {
                        if (Math.random() < 0.2) {
                            // 20% chance to insert an operator
                            const randomOp = operators[Math.floor(Math.random() * operators.length)];
                            result[i-1] += randomOp;
                        }
                        
                        if (Math.random() < 0.15) {
                            // 15% chance to insert syntax
                            const randomSyntax = syntax[Math.floor(Math.random() * syntax.length)];
                            if (randomSyntax.length === 2) {
                                // For paired characters like (), insert content between them
                                result[i] = randomSyntax[0] + result[i] + randomSyntax[1];
                            } else {
                                result[i] += randomSyntax;
                            }
                        }
                    }
                }
                
                return result.join(' ');
            }
            
            // Initialize the app
            function init() {
                const difficulty = textSelect.value;
                const length = parseInt(textLengthSlider.value);
                
                currentText = generateText(difficulty, length);
                currentIndex = 0;
                totalKeystrokes = 0;
                incorrectKeystrokes = 0;
                startTime = null;
                
                clearInterval(timerInterval);
                timeDisplay.textContent = '0:00';
                wpmDisplay.textContent = '0';
                accuracyDisplay.textContent = '100%';
                hintDisplay.style.opacity = '0.6';
                hintDisplay.textContent = 'start typing to begin';
                
                renderText();
                
                // Focus on the typing area to capture keyboard input
                document.getElementById('typing-area').focus();
            }
            
            // Render the text with appropriate styling
            function renderText() {
                textDisplay.innerHTML = '';
                
                for (let i = 0; i < currentText.length; i++) {
                    const charSpan = document.createElement('span');
                    charSpan.textContent = currentText[i];
                    charSpan.className = 'text-char';
                    
                    if (i < currentIndex) {
                        charSpan.classList.add('correct');
                    } else if (i === currentIndex) {
                        charSpan.classList.add('current');
                    }
                    
                    textDisplay.appendChild(charSpan);
                }
            }
            
            // Start the timer
            function startTimer() {
                startTime = new Date();
                timerInterval = setInterval(updateTimer, 1000);
                hintDisplay.style.opacity = '0';
            }
            
            // Update the timer display
            function updateTimer() {
                const currentTime = new Date();
                const elapsedTime = Math.floor((currentTime - startTime) / 1000);
                const minutes = Math.floor(elapsedTime / 60);
                const seconds = elapsedTime % 60;
                timeDisplay.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                updateWPM(elapsedTime);
            }
            
            // Update the WPM display
            function updateWPM(elapsedTime) {
                if (elapsedTime === 0) return;
                
                // Assuming an average word is 5 characters
                const words = currentIndex / 5;
                const minutes = elapsedTime / 60;
                const wpm = Math.round(words / minutes);
                
                wpmDisplay.textContent = wpm;
            }
            
            // Update the accuracy display
            function updateAccuracy() {
                if (totalKeystrokes === 0) return;
                
                const accuracy = Math.round(((totalKeystrokes - incorrectKeystrokes) / totalKeystrokes) * 100);
                accuracyDisplay.textContent = `${accuracy}%`;
            }
            
            // Handle keypress events
            document.addEventListener('keydown', function(e) {
                // Ignore if typing is complete
                if (currentIndex >= currentText.length) return;
                
                // Start timer on first keypress
                if (startTime === null) {
                    startTimer();
                }
                
                // Get all character spans
                const charSpans = textDisplay.querySelectorAll('.text-char');
                
                // Check if the pressed key matches the current character
                const expectedChar = currentText[currentIndex];
                const pressedChar = e.key;
                
                // Ignore special keys like Shift, Ctrl, etc.
                if (pressedChar.length !== 1) return;
                
                totalKeystrokes++;
                
                if (pressedChar === expectedChar) {
                    // Correct keypress
                    charSpans[currentIndex].classList.remove('incorrect');
                    charSpans[currentIndex].classList.add('correct');
                    charSpans[currentIndex].classList.remove('current');
                    currentIndex++;
                    
                    // If there are more characters, update current position
                    if (currentIndex < currentText.length) {
                        charSpans[currentIndex].classList.add('current');
                    } else {
                        // Typing completed
                        clearInterval(timerInterval);
                        hintDisplay.style.opacity = '0.6';
                        hintDisplay.textContent = 'completed! click new text to try again';
                    }
                } else {
                    // Incorrect keypress
                    incorrectKeystrokes++;
                    charSpans[currentIndex].classList.add('incorrect');
                    // No advancing to the next character until correct key is pressed
                }
                
                updateAccuracy();
            });
            
            // Event listeners
            textSelect.addEventListener('change', init);
            resetBtn.addEventListener('click', init);
            textLengthSlider.addEventListener('change', init);
            
            // Initial setup
            init();
        });
    </script>
</body>
</html>
